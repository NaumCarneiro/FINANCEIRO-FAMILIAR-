<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FinanceFam - App Financeiro</title>

  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#820ad1" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <link rel="stylesheet" href="styles.css" />

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  
  <div id="login-screen" class="login-screen active">
    <div class="login-card card">
      <h2><i class="fa-solid fa-wallet"></i> FinanceFam Login</h2>
      <p>Acesse sua conta para continuar.</p>
      <div id="login-error" class="login-error hidden">Credenciais inv치lidas.</div>
      <form id="login-form">
        <div class="form-row">
          <label for="username-input">Usu치rio:</label>
          <input type="text" id="username-input" required placeholder="admin ou usu치rio" />
        </div>
        <div class="form-row">
          <label for="password-input">Senha:</label>
          <input type="password" id="password-input" required placeholder="12345" />
        </div>
        <button type="submit" class="btn primary full-width">Entrar</button>
      </form>
    </div>
  </div>

  <main id="app" class="app hidden">
    <aside class="sidebar" data-visible="true">
      <div class="brand">
        <i class="fa-solid fa-wallet"></i>
        <span>FinanceFam</span>
      </div>

      <nav class="nav">
        <button data-view="home" class="nav-btn active"><i class="fa-solid fa-house"></i><span>In칤cio</span></button>
        <button data-view="transactions" class="nav-btn"><i class="fa-solid fa-list-ul"></i><span>Extrato</span></button>
        <button data-view="goals" class="nav-btn"><i class="fa-solid fa-bullseye"></i><span>Metas</span></button>
        <button data-view="savings" class="nav-btn"><i class="fa-solid fa-piggy-bank"></i><span>Cofre</span></button>
        
        <button data-view="admin" id="nav-admin" class="nav-btn hidden"><i class="fa-solid fa-screwdriver-wrench"></i><span>Admin</span></button>
      </nav>

      <div class="sidebar-bottom">
        <button id="btn-theme-toggle" class="icon-btn" aria-label="Alternar tema"><i class="fa-solid fa-moon"></i></button>
        <button id="btn-logout" class="logout">Sair</button>
      </div>
    </aside>

    <section class="main">
      <header class="topbar">
        <div class="left">
          <div class="month-switcher">
            <button id="prev-month" class="small icon-btn-round"><i class="fa-solid fa-chevron-left"></i></button>
            <div id="current-month"></div>
            <button id="next-month" class="small icon-btn-round"><i class="fa-solid fa-chevron-right"></i></button>
          </div>
        </div>
        <div class="right">
          <div id="user-greeting">Ol치, <strong id="user-name"></strong></div>
        </div>
      </header>
      
      <div class="content-wrapper">
          <section id="view-home" class="view active">
            <div class="cards">
              <div class="card income"><div class="card-title">Entradas</div><div class="card-value" id="summary-income">R$ 0,00</div></div>
              <div class="card expense"><div class="card-title">Sa칤das</div><div class="card-value" id="summary-expense">R$ 0,00</div></div>
              <div class="card balance"><div class="card-title">Saldo</div><div class="card-value" id="summary-balance">R$ 0,00</div></div>
            </div>
            <section class="chart-panel card">
              <h3>Gastos por Categoria</h3>
              <canvas id="chart-expenses" width="600" height="300"></canvas>
            </section>
            <section class="latest-transactions-panel">
                <h3>칔ltimos Lan칞amentos</h3>
                <div id="latest-transaction-list" class="list latest-list"></div>
            </section>
          </section>

          <section id="view-transactions" class="view hidden">
            <header class="list-header"><h3>Extrato Mensal</h3></header>
            <div id="transaction-list" class="list"></div>
          </section>

          <section id="view-goals" class="view hidden"><header class="list-header"><h3>Minhas Metas</h3></header><p style="padding: 20px;">Funcionalidade de Metas em desenvolvimento.</p></section>
          <section id="view-savings" class="view hidden"><header class="list-header"><h3>Cofre</h3></header><p style="padding: 20px;">Funcionalidade do Cofre em desenvolvimento.</p></section>
          
          <section id="view-admin" class="view hidden">
              <header class="list-header">
                <h2>游녬 Painel Administrativo</h2>
              </header>
              
              <div class="admin-panel card">
                  <h3 style="color: var(--purple-nu);">Gerenciar Usu치rios</h3>
                  <div id="user-list" class="list admin-user-list">
                      </div>
                  <button id="btn-add-user" class="btn primary small"><i class="fa-solid fa-user-plus"></i> Novo Usu치rio</button>
                  <p style="margin-top: 15px; font-size: 0.9em; color: #555;">Usu치rio Admin n칚o pode ser exclu칤do.</p>
              </div>

              <div class="admin-panel card" style="margin-top: 20px;">
                  <h3 style="color: var(--purple-nu);">Hist칩rico de Transa칞칫es Globais</h3>
                  <div id="global-history" class="list">
                      </div>
                  <p style="margin-top: 15px; font-size: 0.9em; color: #555;">Todas as movimenta칞칫es de todos os usu치rios.</p>
              </div>

          </section>

      </div>
      
      <button id="btn-open-modal" class="btn fab primary" title="Novo Lan칞amento">
        <i class="fa-solid fa-plus"></i>
      </button>
      
    </section>
  </main>

  <div id="modal-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <header class="modal-header">
        <h3 id="modal-title">Novo Lan칞amento</h3>
        <button class="close-modal icon-btn" id="close-modal"><i class="fa-solid fa-xmark"></i></button>
      </header>
      <form id="form-add-transaction" class="modal-body">
        <div class="form-row">
          <label>Tipo</label>
          <div class="type-toggle">
            <label><input type="radio" name="type" value="expense" checked> Gasto</label>
            <label><input type="radio" name="type" value="income"> Renda</label>
          </div>
        </div>

        <div class="form-row">
          <label for="amount-input">Valor (R$)</label>
          <input type="number" id="amount-input" name="amount" step="0.01" required placeholder="0.00" />
        </div>

        <div class="form-row">
          <label for="category-select">Categoria</label>
          <select id="category-select" name="category">
            <option value="Alimenta칞칚o">Alimenta칞칚o</option>
            <option value="Transporte">Transporte / Combust칤vel</option>
            <option value="Contas Fixas">Contas Fixas (Aluguel, Luz)</option>
            <option value="Sa칰de">Sa칰de / Medicamentos</option>
            <option value="Lazer">Lazer / Viagens</option>
            <option value="Sal치rio">Sal치rio / Renda Extra</option>
            <option value="Outros">Outros</option>
          </select>
        </div>

        <div class="form-row">
          <label for="description-input">Descri칞칚o</label>
          <input type="text" id="description-input" name="description" placeholder="Ex: Mercado semanal" />
        </div>

        <div class="form-row row-two">
          <div>
            <label for="date-input">Data</label>
            <input type="date" id="date-input" name="date" required/>
          </div>
          <div>
            <label for="time-input">Hora (Opcional)</label>
            <input type="time" id="time-input" name="time" />
          </div>
        </div>
        
        <div class="form-row" id="recurrence-row">
          <label for="recurrence-select">Repeti칞칚o de Gasto (Meses)</label>
          <select id="recurrence-select" name="recurrence">
            <option value="1">N칚o se repete</option>
            <option value="2">2 Meses</option>
            <option value="3">3 Meses</option>
            <option value="6">6 Meses</option>
            <option value="12">12 Meses</option>
          </select>
        </div>

        <div class="form-row form-actions">
          <button type="submit" class="btn primary">Salvar Lan칞amento</button>
          <button type="button" class="btn outline" id="cancel-modal">Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <div id="modal-user-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-user-title">
        <header class="modal-header">
            <h3 id="modal-user-title">Criar Novo Usu치rio</h3>
            <button class="close-modal icon-btn" data-close-user-modal><i class="fa-solid fa-xmark"></i></button>
        </header>
        <form id="form-add-user" class="modal-body">
            <input type="hidden" name="userId" id="edit-user-id">
            <div class="form-row">
                <label for="new-username">Nome de Usu치rio</label>
                <input type="text" id="new-username" name="newUsername" required placeholder="Ex: JoaoSilva" />
            </div>
            <div class="form-row">
                <label for="new-password">Senha (Padr칚o 12345)</label>
                <input type="password" id="new-password" name="newPassword" placeholder="12345" />
            </div>
            <div class="form-row">
                <label>N칤vel de Acesso</label>
                <select name="newRole" id="new-role">
                    <option value="standard">Padr칚o</option>
                    <option value="admin">Administrador</option>
                </select>
            </div>
            <div class="form-row form-actions">
                <button type="submit" class="btn primary" id="btn-save-user">Salvar Usu치rio</button>
                <button type="button" class="btn outline" data-close-user-modal>Cancelar</button>
            </div>
        </form>
    </div>
  </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/date-fns/2.29.3/date-fns.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/date-fns/2.29.3/locale/pt-BR.min.js"></script>

  <script src="app.js"></script>
</body>
</html>

